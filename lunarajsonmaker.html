<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AnimalCompanyMods Inventory Generator</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary: #4CAF50;
      --primary-dark: #388E3C;
      --secondary: #FF9800;
      --background: #121212;
      --surface: #1E1E1E;
      --text: #E0E0E0;
      --border: #333;
    }
    
    [data-theme="light"] {
      --primary: #4CAF50;
      --primary-dark: #388E3C;
      --secondary: #FF9800;
      --background: #f5f5f5;
      --surface: #ffffff;
      --text: #333333;
      --border: #e0e0e0;
    }
    
    body {
      font-family: 'Poppins', sans-serif;
      background-color: var(--background);
      color: var(--text);
      margin: 0;
      padding: 20px;
      min-width: 1024px;
    }
    
    .main-container {
      max-width: 1200px;
      margin: 0 auto;
    }
    
    .header-container {
      text-align: center;
      margin-bottom: 30px;
      position: relative;
    }
    
    h1 {
      color: var(--primary);
      font-size: 2.2rem;
      margin: 10px 0;
      font-weight: 600;
    }
    
    .mode-toggle-container {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 20px;
      margin-bottom: 10px;
    }
    
    .theme-switch {
      position: relative;
      display: inline-block;
      width: 60px;
      height: 30px;
    }
    
    .theme-switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }
    
    .slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: var(--surface);
      transition: .4s;
      border-radius: 34px;
      border: 1px solid var(--border);
    }
    
    .slider:before {
      position: absolute;
      content: "";
      height: 22px;
      width: 22px;
      left: 4px;
      bottom: 3px;
      background-color: var(--primary);
      transition: .4s;
      border-radius: 50%;
    }
    
    input:checked + .slider {
      background-color: var(--surface);
    }
    
    input:checked + .slider:before {
      transform: translateX(28px);
      background-color: var(--secondary);
    }
    
    .slider-icons {
      display: flex;
      justify-content: space-between;
      padding: 0 8px;
      align-items: center;
      height: 100%;
    }
    
    .search-container {
      max-width: 800px;
      margin: 0 auto 30px;
      position: relative;
    }
    
    #searchInput {
      width: 100%;
      padding: 12px 20px;
      border-radius: 30px;
      border: 1px solid var(--border);
      background-color: var(--surface);
      color: var(--text);
      font-size: 1rem;
    }
    
    .search-suggestions {
      position: absolute;
      width: 100%;
      max-height: 300px;
      overflow-y: auto;
      background-color: var(--surface);
      border: 1px solid var(--border);
      border-top: none;
      border-radius: 0 0 10px 10px;
      z-index: 10;
      display: none;
    }
    
    .form-section {
      background-color: var(--surface);
      padding: 25px;
      border-radius: 15px;
      max-width: 1000px;
      margin: 0 auto 30px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }
    
    .form-field {
      margin-bottom: 20px;
    }
    
    label {
      display: block;
      margin-bottom: 8px;
      font-weight: 500;
    }
    
    select, input[type="number"], input[type="text"] {
      width: 100%;
      padding: 10px 15px;
      border-radius: 8px;
      border: 1px solid var(--border);
      background-color: var(--surface);
      color: var(--text);
      font-size: 1rem;
    }
    
    .input-row {
      display: flex;
      gap: 15px;
      align-items: center;
    }
    
    .input-container {
      flex: 1;
    }
    
    .random-container {
      display: flex;
      align-items: center;
      gap: 10px;
      white-space: nowrap;
    }
    
    .random-toggle-wrap {
      margin-left: 10px;
    }
    
    .random-mode-toggle {
      display: flex;
      align-items: center;
      gap: 5px;
    }
    
    .toggle-label {
      font-size: 0.9rem;
    }
    
    #addItem {
      background-color: var(--primary);
      color: white;
      border: none;
      padding: 12px 25px;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
      font-size: 1rem;
      width: 100%;
      margin-top: 15px;
      transition: background-color 0.3s;
    }
    
    #addItem:hover {
      background-color: var(--primary-dark);
    }
    
    .item-section {
      background-color: var(--surface);
      padding: 25px;
      border-radius: 15px;
      max-width: 1000px;
      margin: 0 auto;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }
    
    .item-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }
    
    h2 {
      color: var(--primary);
      font-size: 1.5rem;
      margin: 0;
    }
    
    #downloadJson {
      background-color: var(--secondary);
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 500;
      transition: background-color 0.3s;
      font-size: 0.9rem;
    }
    
    #downloadJson:hover {
      opacity: 0.9;
    }
    
    .inventory-tree {
      list-style-type: none;
      padding: 0;
      margin: 0;
    }
    
    .inventory-tree li {
      padding: 10px 15px;
      border-bottom: 1px solid var(--border);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .inventory-tree li:last-child {
      border-bottom: none;
    }
    
    @media (max-width: 1200px) {
      body {
        min-width: auto;
        padding: 15px;
      }
      
      .main-container {
        max-width: 100%;
      }
    }
    
    @media (max-width: 768px) {
      .input-row {
        flex-direction: column;
        gap: 10px;
      }
      
      .random-container {
        width: 100%;
        justify-content: flex-start;
      }
      
      #downloadJson {
        padding: 8px 16px;
        font-size: 0.8rem;
      }
      
      h1 {
        font-size: 1.8rem;
      }
      
      .form-section, .item-section {
        padding: 20px;
      }
    }
    
    @media (max-width: 480px) {
      body {
        padding: 10px;
      }
      
      h1 {
        font-size: 1.5rem;
      }
      
      h2 {
        font-size: 1.2rem;
      }
      
      .item-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 10px;
      }
      
      #downloadJson {
        width: 100%;
      }
    }
  </style>
</head>
<body>
  <div class="main-container">
    <div class="header-container">
      <div class="mode-toggle-container">
        <label class="theme-switch" for="themeToggle">
          <input type="checkbox" id="themeToggle" checked>
          <span class="slider">
            <span class="slider-icons">
              <span>‚òÄÔ∏è</span>
              <span>üåô</span>
            </span>
          </span>
        </label>
      </div>
      <h1>AnimalCompanyMods Inventory Generator</h1>
    </div>

    <div class="search-container">
      <input type="text" id="searchInput" placeholder="Search items..." />
      <div id="searchSuggestions" class="search-suggestions"></div>
    </div>

    <div class="form-section">
      <div class="form-field">
        <label for="itemSelect">Item:</label>
        <select id="itemSelect"></select>
      </div>

      <div class="form-field">
        <label>Hue:</label>
        <div class="input-row">
          <div class="input-container">
            <input type="number" id="hue" value="0" />
          </div>
          <div class="random-container">
            <input type="checkbox" id="randomHue" />
            <label for="randomHue">Random</label>
            <div class="random-toggle-wrap" id="randomHueToggleWrap">
              <label class="random-mode-toggle">
                <input type="checkbox" id="sameRandomHue" checked>
                <span class="toggle-label">Same</span>
              </label>
            </div>
          </div>
        </div>
      </div>

      <div class="form-field">
        <label>Saturation:</label>
        <div class="input-row">
          <div class="input-container">
            <input type="number" id="saturation" value="0" />
          </div>
          <div class="random-container">
            <input type="checkbox" id="randomSaturation" />
            <label for="randomSaturation">Random</label>
            <div class="random-toggle-wrap" id="randomSaturationToggleWrap">
              <label class="random-mode-toggle">
                <input type="checkbox" id="sameRandomSaturation" checked>
                <span class="toggle-label">Same</span>
              </label>
            </div>
          </div>
        </div>
      </div>

      <div class="form-field">
        <label>Size (Scale Modifier):</label>
        <div class="input-row">
          <div class="input-container">
            <input type="number" id="size" value="0" />
          </div>
          <div class="random-container">
            <input type="checkbox" id="randomSize" />
            <label for="randomSize">Random</label>
            <div class="random-toggle-wrap" id="randomSizeToggleWrap">
              <label class="random-mode-toggle">
                <input type="checkbox" id="sameRandomSize" checked>
                <span class="toggle-label">Same</span>
              </label>
            </div>
          </div>
        </div>
      </div>

      <div class="count-field">
        <label for="count">Count:</label>
        <input type="number" id="count" value="1" min="1" />
      </div>

      <div id="containerSelection">
        <label for="containerSelect">Add to container:</label>
        <select id="containerSelect">
          <option value="root">Root (No Container)</option>
        </select>
      </div>

      <button id="addItem">Add Item</button>
    </div>

    <div class="item-section">
      <div class="item-header">
        <h2>Inventory Items</h2>
        <button id="downloadJson">Download JSON</button>
      </div>
      <ul id="inventoryTree" class="inventory-tree"></ul>
    </div>
  </div>

  <script>
    // Inventory data structure
    const inventory = {
      root: {
        name: "Root",
        children: []
      }
    };

    // DOM elements
    const itemSelect = document.getElementById('itemSelect');
    const containerSelect = document.getElementById('containerSelect');
    const inventoryTree = document.getElementById('inventoryTree');
    const addItemBtn = document.getElementById('addItem');
    const downloadJsonBtn = document.getElementById('downloadJson');

    // Function to update container dropdown
    function updateContainerSelect() {
      containerSelect.innerHTML = '<option value="root">Root (No Container)</option>';
      
      function addContainers(parentId, prefix = '') {
        const container = inventory[parentId];
        if (container.children) {
          container.children.forEach(childId => {
            const child = inventory[childId];
            if (child.isContainer) {
              const option = document.createElement('option');
              option.value = childId;
              option.textContent = prefix + child.name;
              containerSelect.appendChild(option);
              addContainers(childId, prefix + '-- ');
            }
          });
        }
      }
      
      addContainers('root');
    }

    // Function to render inventory tree
    function renderInventoryTree() {
      inventoryTree.innerHTML = '';
      
      function renderItems(parentId, parentElement) {
        const container = inventory[parentId];
        if (container.children) {
          container.children.forEach(childId => {
            const child = inventory[childId];
            const li = document.createElement('li');
            
            const itemInfo = document.createElement('span');
            itemInfo.textContent = `${child.name} (Hue: ${child.hue}, Sat: ${child.saturation}, Size: ${child.size})`;
            
            const deleteBtn = document.createElement('button');
            deleteBtn.textContent = 'Delete';
            deleteBtn.className = 'delete-btn';
            deleteBtn.onclick = () => {
              // Remove from parent's children
              const parent = inventory[parentId];
              parent.children = parent.children.filter(id => id !== childId);
              // Remove from inventory
              delete inventory[childId];
              renderInventoryTree();
              updateContainerSelect();
            };
            
            li.appendChild(itemInfo);
            li.appendChild(deleteBtn);
            parentElement.appendChild(li);
            
            if (child.isContainer && child.children && child.children.length > 0) {
              const ul = document.createElement('ul');
              li.appendChild(ul);
              renderItems(childId, ul);
            }
          });
        }
      }
      
      renderItems('root', inventoryTree);
    }

    // Add item button handler
    addItemBtn.addEventListener('click', () => {
      const itemId = 'item-' + Date.now();
      const itemName = itemSelect.options[itemSelect.selectedIndex].text;
      const hue = document.getElementById('hue').value;
      const saturation = document.getElementById('saturation').value;
      const size = document.getElementById('size').value;
      const count = document.getElementById('count').value;
      const containerId = containerSelect.value;
      
      // Create new item
      inventory[itemId] = {
        name: itemName,
        hue: hue,
        saturation: saturation,
        size: size,
        count: count,
        isContainer: false
      };
      
      // Add to selected container
      if (!inventory[containerId].children) {
        inventory[containerId].children = [];
      }
      inventory[containerId].children.push(itemId);
      
      renderInventoryTree();
      updateContainerSelect();
    });

    // Download JSON button handler
    downloadJsonBtn.addEventListener('click', () => {
      // Create a clean copy of the inventory without internal references
      function createExportObject(parentId) {
        const container = inventory[parentId];
        const exportObj = {
          name: container.name,
          hue: container.hue || 0,
          saturation: container.saturation || 0,
          size: container.size || 0,
          count: container.count || 1,
          isContainer: container.isContainer || false
        };
        
        if (container.children && container.children.length > 0) {
          exportObj.children = container.children.map(childId => createExportObject(childId));
        }
        
        return exportObj;
      }
      
      const exportData = createExportObject('root');
      const dataStr = JSON.stringify(exportData.children, null, 2);
      const dataUri = 'data:application/json;charset=utf-8,' + encodeURIComponent(dataStr);
      
      const exportFileDefaultName = 'inventory.json';
      const linkElement = document.createElement('a');
      linkElement.setAttribute('href', dataUri);
      linkElement.setAttribute('download', exportFileDefaultName);
      linkElement.click();
    });

    // Initialize
    updateContainerSelect();
    renderInventoryTree();

    // Theme toggle functionality
    const themeToggle = document.getElementById('themeToggle');
    const htmlElement = document.documentElement;
    
    const savedTheme = localStorage.getItem('theme') || 'dark';
    htmlElement.setAttribute('data-theme', savedTheme);
    themeToggle.checked = savedTheme === 'dark';

    themeToggle.addEventListener('change', function() {
      if (this.checked) {
        htmlElement.setAttribute('data-theme', 'dark');
        localStorage.setItem('theme', 'dark');
      } else {
        htmlElement.setAttribute('data-theme', 'light');
        localStorage.setItem('theme', 'light');
      }
    });
  </script>
</body>
</html>
